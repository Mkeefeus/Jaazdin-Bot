import { db } from 'db/db';
import { ChatInputCommandInteraction } from 'discord.js';
import { buildCommand } from '~/helpers';
import { CommandData } from '~/types';

const commandData: CommandData = {
  name: 'ping',
  description: 'Replies with Pong!',
  category: 'utility',
  options: [
    {
      name: 'test_option',
      type: 'string',
      description:
        'A test option with a very long name and description to check limits................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................',
    },
    {
      name: 'test_option2',
      type: 'string',
      description:
        'A test option with a very long name and description to check limits................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................',
    },
  ],
};

const data = buildCommand(commandData);

async function execute(interaction: ChatInputCommandInteraction) {
  try {
    await db.authenticate();
    console.log('Connection has been established successfully.');
  } catch (e) {
    console.error('Unable to connect to the database:', e);
  }
  await interaction.reply('Pong!');
}

export { data, execute, commandData };
